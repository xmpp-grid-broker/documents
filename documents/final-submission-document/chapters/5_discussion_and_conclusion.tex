% !TeX spellcheck = en_GB
\chapter{Discussion and Conclusion}
\epigraph{Wisdom is not a product of schooling but of the lifelong attempt to acquire it.}{Albert Einstein}
\section{Achieved Result}

% Requirements(?)
% - requirements: table with "top level requirements"

% Architecture
% - How did our architectural decisions turn out?: Positive and negative example
%    - SASL EXTERNAL mit Websockets / client certificate -> would be easier with username/pw -> In practice you need proxy, because popup; link to problems
%    - WebSockets with openfire did not work; webapi proxy would have some benefits, but "normal" web proxy are very stable.
%    - Architectue Style: Features like autocomplete and filtering could only be implemented with server plugin...
%    + Stanza is acceptable -> We do not use API but use direct messageing because of advanced features we require -> Our Pull Requests were merged fast
%    + Web Application with Angular: TS with IDE support has paid off.
%    + UI library was a help, but left us enough freedom; good decision regaring long life cycle.
%    ? Role Managment: right way, but no way to test
% - performance in terms of speed, scalability, concurrency, usability etc
% - good security attestet in reviews

% Implementation
% - tests: coverage etc. (see redbackup); how many lines tests/lines code ratio
% - Ausgew√§hlte Implementierungsdetails/Metriken diskutieren (Bsp. Algorithmen, Datenstrukturen, Libraries, Architectural Hot Spots)

\section{Lessons Learned}

In this section, we describe unexpected project events and the lessons we learned from them.

\subsection{Project Course}

\subsubsection{Issues and Time Management}

In general, our issue management and time tracking with JIRA and our Scrum-based approached worked very well.

While discussing time management issues in Retrospective 3, we noted that we had underestimated the required time for some implementation issues by several hours.
Also, many implementation issues were rather large, mostly estimated four hours and longer.

To solve this, we decided to create smaller tasks and list specific subtasks in form of check-lists.
We decided to install a check-list extension for JIRA, to simplify this task.

Despite the improved task size, it was still very difficult to estimate and specify tasks in a precise manner.
The main reason for that was our limited experience with the chosen Angular framework and XMPP environment.

\subsubsection{Documentation}

To adhere a high documentation quality level, we used Github Pull Requests to carry out peer reviews.
To simplify this process, we also set up a continous integration builds which always provided the latest stable documentation and appendices.
We think that this approach led to a high overall documentation standard.

In general, it was difficult to summarise and describe our architecture due to inconsistent terminology of the underlying standards.
We discuss this in Section~\ref{lessons-learned-standards}.


\subsection{Decisions}
\subsubsection{Architecture}

Most decisions regarding the architecture were carried out as Architectural Design Decisions \cite{architectural-design-decisions} (see Appendix~\ref{sec:architectural-decisions}).

The approach helped us to systematically document all influences and plan the architecture in a structured way.

Retrospectively, we should have also created more architectural decisions later on in the project, e.g. to decide about the layering and structure of the modules, as well as barrel imports.


\subsection{Development, Frameworks and Tooling}

\paragraph{Test Driven Development} was not possible the way we had anticipated it.

Due to the use of angular and stanza, the testing environment differed greatly from the real application context.
Therefore, it was very difficult to create tests in advance of implementing the actual code structure.
A factor that also contributed to this difficulty was our limited knowledge of the used frameworks.

Nevertheless, writing many tests proved to be very valuable during the course of the project.
It not only helped us to be confident in additional developments,
but will also be useful to future developers expanding of the application.

\paragraph{The Docker Development Environment} has proven itself to be valuable for a quick development start.
It provides developers with a very productive way to test modifications in a realistic yet portable environment.

\paragraph{Compodoc,} the tool we used to visualise the structure of our Angular application,
did not add as much additional value to the project documentation as we had hoped.

We assume, that it would be better suited for angular projects that implement libraries or provide widgets, in contrast to our application.

\subsection{Standards}\label{lessons-learned-standards}

During the course of this thesis, we learned several lessons about using standards and in which way these standards posed challenges or supported our work.

\subsubsection{Terminology}

The \gls{xmpp-grid} standard uses \gls{sacm} terminology \cite{ietf-sacm-terminology-14}, whereas all \gls{xmpp} standards use the \gls{xmpp}/\gls{xep} terminology.
Most concepts and definitions of terms differ or overlap slightly, which makes it difficult to comprehend and connect both standard formats.
It also makes the use of a consistent terminology impossible, as some concepts from \gls{xmpp}/\glspl{xep} are not reflected in \gls{sacm} terminology and vice versa.

\subsubsection{Versions of \glspl{xep}}
\gls{xmpp} Extension Procotols (\glspl{xep}) can receive modifications after being declared final, 
``to correct errors, incorporate the lessons of experience, or document new security concerns''. \cite{xep-0001}

This can make it very difficult to rely modified parts of these standards, as there is no indication which version of a standard is implemented by a \gls{xmpp} server or client.

A prominent example of such a modified standard is the \gls{publish-subscribe} \gls{xep}.
During the last few years, this standard was largely modified,
and the concept of ``Collection Nodes'' was even extracted into a separate standard \cite{xep-0248}.
In our case, the openfire XMPP server implemented a older version of the \gls{xep},
not supporting all features that we wanted to use as part of this thesis.

\subsubsection{Deprecated \glspl{xep}}

Many \glspl{xep} build on functionality specified by other, cross referenced \glspl{xep}.
This might be problematic, especially as some referenced standards might not be active anymore.

A prominent example of this is the PubSub Collection Nodes \gls{xep} \cite{xep-0248}, which currently has a \emph{deferred} status, but is still used by the \gls{publish-subscribe} \gls{xep} \cite{xep-0060} which currently has a \emph{draft} status.

\subsubsection{Non-binding Standardisation}

Many features, which are required for the implementation of a \gls{xmpp-grid} \gls{broker}, are marked as optional in the corresponding \glspl{xep}.
To some extent, the availability of these features can be queried with Feature Discovery \cite{xep-0030}, but not all optional features are exposed using Feature Discovery.
An example of this is the \gls{publish-subscribe} \gls{xep} \cite{xep-0060}.

Additionally, some features are not explicitely specified in the according \gls{xep}, but rather implicitly demonstrated using examples.

These limitations make it difficult, to rely on availability of some features described in these \glspl{xep}


\section{Future work}
The result of our bachelor thesis is a working application, ready to prove itself in practice.
Even though all specified functionality was implemented, the user experience can still be further improved.

Conducting usability tests by observing administrators who manage \glspl{xmpp-grid} can reveal significant insights~\cite{krug:dont-make-me-think}.

To further improve the user experience, auto-complete for users and topics might be helpful.
As already discussed in Section~\fullref{encountered-problems}, this cannot be implemented efficiently due to shortcomings in the \gls{publish-subscribe} \gls{xep}.
One option would be to get involved and propose the required functionality in the \gls{xep} standardisation process.
A more short-term solution would be to tie the implementation closer to a specific \gls{xmpp} server that supports these features over proprietary APIs.
Alternatively, an unofficial \gls{xep} including corresponding server plugins can be specified and implemented.

Working around shortcomings of the \gls{xmpp} server implementations, lost updates for example (See Section~\fullref{sec:lost-updates}), could advance the usability as well.
However, It must be noted that adding more logic in the client contradicts the \gls{xmpp} philosophy that encourages simple client and complex server implementations \cite{definitive-guide-xmpp}.

\section{Conclusion}
\paragraph{The \gls{xmpp-grid} \gls{broker} application} enables administrators to configure \glspl{xmpp-grid} in a usable and productive way.
The modern web interface facilitates obtaining a comprehensive view of the configuration and structure of an \gls{xmpp-grid}.
Apart from improving the usability significantly, the application is also cross-platform and not tied to a particular \gls{xmpp} server implementation.

\paragraph{Our proposed architecture} has proven to work in practice.
Although the initial setup with a proxy server is not trivial, the architecture will pay off in practice regarding security and maintainability as reverse proxies are commonly used, and static sites are easy to maintain and upgrade.

\paragraph{Angular and stanza} turned out to be a good choice for the implementation.
Angular provides productive tools and a comprehensive testing infrastructure that allowed us to build an application that can be maintained efficiently in the long-term.

Stanza met most of our requirements concerning \gls{xmpp} support and allowed us to extend and improve it where needed.

Using Openfire as an \gls{xmpp} server backend was demanding at times due to the scanty implementation of the \gls{publish-subscribe} standard.
Some of these shortcomings, however, revealed problematic limitations of the standard which otherwise might not have been considered.

\paragraph{The Bachelor Thesis} went well from our point of view.
We were able to satisfy all critical requirements despite some limitations in the underlying standards and \gls{xmpp} server hindered our implementation.

\paragraph{In the future,} the application must prove itself in practice.
Based on feedback from users in the industry, the usability and feature set can further be refined.

To support some features efficiently, the implementation must either be bound to a specific \gls{xmpp} server or new extensions to the \gls{xmpp} standard must be proposed.

We hope that with the help of our implementation the IETF draft ``Using \gls{xmpp} for Security Information Exchange'' will become an established security standard used in practical industry applications.
